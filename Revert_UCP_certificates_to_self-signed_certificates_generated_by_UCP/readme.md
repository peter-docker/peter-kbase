---
type: kbase
version: 12
title: "Revert UCP certificates to self-signed certificates generated by UCP"
summary: "For an existing UCP instance, it is possible to reconfigure UCP to use self-signed certificated generated by UCP. To revert to self-signed certificates for UCP, ssh into each UCP manager node and perform the following: Reconfigure DTR to trust the new UCP certificates (be sure to change the DTR image version and UCP URL to match your environment): To revert to self-signed certificates for DTR, refer to Revert DTR certificates to self-signed certificates generated by DTR."
dateCreated: "Tue, 22 Aug 2017 04:16:00 GMT"
dateModified: "Fri, 29 Sep 2017 18:29:38 GMT"
dateModified_unix: 1506709778
upvote: 1
internal: no
author: "trapier"
platform:
  - linux
testedon:
  - ucp-2.2.0
tags:
  - certs
product:
  - EE
---

For an existing UCP instance, it is possible to **reconfigure** UCP to use self-signed certificated generated by UCP.  
  
This can be helpful in following example instances:

* If you used 3rd party certificates and want to revert back to the built-in UCP self-signed certificates.
* Can not access UCP UI due to expired certificates.

## Resolution

> **Note**: UCP client bundles will need to be re-issued after performing this procedure.

To revert to self-signed certificates for UCP, ssh into each UCP manager node and perform the following:

1. Remove the contents of the `ucp-controller-server-certs` volume on all managers: 
    
        sudo rm $(docker volume inspect ucp-controller-server-certs --format '{{.Mountpoint}}')/*
2. Remove the `ucp-proxy` container on one manager: 
    
        docker rm -f ucp-proxy
    
    Reconciliation will begin and regenerate self-signed certificates. Run the following command to watch this process on the same manager:
    
        docker logs -f $(docker ps -qf name=ucp-agent)
3. Reconfigure DTR to trust the new UCP certificates (be sure to change the DTR image version and UCP URL to match your environment): 
    
        docker run --rm -it docker/dtr:<^>2.3.0<^^> reconfigure --ucp-insecure-tls --ucp-url https://<^>ucp.example.com<^^> --ucp-username admin

> To revert to self-signed certificates for DTR, refer to [Revert DTR certificates to self-signed certificates generated by DTR](/article/Revert_DTR_certificates_to_self-signed_certificates_generated_by_DTR "Revert DTR certificates to self-signed certificates generated by DTR").
